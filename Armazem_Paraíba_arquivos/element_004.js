define(["jquery","knockout","pubsub"],function(e,t,n){"use strict";return{elementName:"enext_amz_header_menu",isMobile:t.observable(window.innerWidth<=991),menuItens:t.observableArray([]),onLoad:function(t){e.Topic(n.topicNames.PAGE_VIEW_CHANGED).subscribe(function(){t.isMobile()&&e("body").hasClass("openedNavMobile")&&(e(".x-header__topic-navmobile--icon").removeClass("open"),e("body").removeClass("openedNavMobile"))}),e.Topic("amz.menu.elementInstance.loaded").subscribe(function(e){if(!t.elements.enext_amz_header_menu.menuItens().length)for(var n=0;n<e.length;n++)t.elements.enext_amz_header_menu.menuItens.push(e[n])})},hoverMenu:function(){this.isMobile()||e(".x-header__menu-item").hover(function(){var t=e(this)[0],n=e(".x-header__menu-wrapper"),r=e(this).find(".x-header__submenu-wrapper"),i=r.find(".x-header__subcat-column"),s=e(this).find(".x-header__menu-subcat");r.length&&i.length&&n.length&&(s[0].style.minHeight=r[0].offsetHeight+30+"px",t.offsetLeft+r[0].offsetWidth>n[0].offsetWidth?(r[0].style.left="unset",r[0].style.right=0):(r[0].style.right="unset",r[0].style.left=t.offsetLeft-5+"px"))})},elementInstanceLoadCallback:function(t){var n=t.config.richText.content;n=jQuery.parseJSON(n),e.Topic("amz.menu.elementInstance.loaded").publish(n)},openedNavMobile:function(){e("#enext-header-container").hasClass("openedNavMobile")?e("#enext-header-container").removeClass("openedNavMobile"):e("#enext-header-container").addClass("openedNavMobile")},currentCategory:function(t){var n=window.location.pathname;n.indexOf("categoria")!=-1&&e(".x-header .x-header__topic .x-header__topic-nav ul li").each(function(){e(this).find("a").attr("href")==n?e(this).addClass("is-active"):e(this).removeClass("is-active")})},checkLink:function(e){var t=e.indexOf("http")==-1||e.indexOf("www")==-1||e.indexOf(".com")==-1;return t},handleRender:function(){e(".category").click(function(){e(".subcategory").removeClass("active"),e(".subcategory."+this.classList[1]).addClass("active")}),e(".category").mouseover(function(){setTimeout(function(){e(".subcategory").css("opacity","0")},100),e(".subcategory").removeClass("active");var t=this;e(".subcategory."+t.classList[1]).addClass("active"),setTimeout(function(){e(".subcategory."+t.classList[1]).css("opacity","1")},150)}),e("#AllDepart").mouseover(function(){setTimeout(function(){e(".category-container").css({opacity:"1"},150)}),e(".category-container").css("display","block")}),e("#AllDepart").mouseleave(function(){e(".subcategory").removeClass("active"),setTimeout(function(){e(".category-container").css("display","none")},320),e(".category-container").css({opacity:"0"})})}}})