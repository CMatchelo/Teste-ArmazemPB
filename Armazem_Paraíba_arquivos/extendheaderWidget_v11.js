define(["jquery","knockout","pubsub","navigation","ccConstants","ccResourceLoader!global/CustomTranslations"],function(e,t,n,r,i,s){"use strict";return{onLoad:function(r){function s(){return window.innerWidth<=800?!0:!1}var i=this;r.currency=t.observable(),r.headerProp=t.observable(null),r.isMobile=t.observable(window.innerWidth<=991),r.toggleMobile=t.observable(!1),r.menuOpen=t.observable(!1),document.addEventListener("scroll",function(){s()&&e(".x-header-input").length>0&&(document.documentElement.scrollTop>25&&!e(".x-header-input").val().length>0?(e("#wi600021-enext_amz_header_search-id").css({opacity:"0",height:"10px","pointer-events":"none"}),e("#x-searchbar-opener").css({opacity:"1"}),e(".x-header__topic-logo").css({"margin-bottom":"8px"}),e(".x-header-content.x-header-content--search").css({opacity:"0"})):(e("#wi600021-enext_amz_header_search-id").css({opacity:"1",height:"46px","pointer-events":"all"}),e("#x-searchbar-opener").css({opacity:"0"}),e(".x-header__topic-logo").css({"margin-bottom":"24px"}),e(".x-header-content.x-header-content--search").css({opacity:"1"})))}),r.currentActiveNav=function(t,n){window.innerWidth<=991&&setTimeout(function(){e(".x-header__topic-nav li").on("click",function(t){e(".x-header__topic-nav li").not(this).removeClass("active"),e(this).toggleClass("active")})},3e3)},r.setAccordion=function(){window.innerWidth<=991&&e(document).on("click",".subcat-toggle",function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget),r=n.next(),i=n.parent().siblings(),s=i.find(".x-header__menu-subcat"),o=i.find(".subcat-toggle");o.removeClass("open"),n.toggleClass("open"),s.removeClass("open").stop().slideUp("fast"),r.stop().slideToggle("fast")})},r.currency=r.site().selectedPriceListGroup().currency,r.currency.symbol!==""&&(r.currency.oldSymbol=r.currency.symbol),e.Topic(n.topicNames.PAGE_VIEW_CHANGED).subscribe(function(){e(".bg-loader").addClass("active"),r.isMobile()&&(r.menuOpen(!1),e(".x-header__menu-subcat").slideUp("fast")),e([document.documentElement,document.body]).scrollTop(0)}),e.Topic(n.topicNames.PAGE_READY).subscribe(function(){e(".bg-loader").removeClass("active")}),e.Topic("enext.header.menu.mobile").subscribe(function(){r.menuOpen()?(r.menuOpen(!1),e(".x-header__menu-subcat").slideUp("fast")):r.menuOpen(!0)}),r.currentActiveNav(),i.setAccordion()},beforeAppear:function(){var t=this;t.ct=s.pt_BR.userActions,t.loginOpen=function(e,t){var n=this,r=document.querySelector(".x-header-content--login"),i=document.querySelector(".x-modal__content--login");n.removeAllClasses(".x-header-content","is-active"),n.removeAllClasses(".x-modal__content","is-active"),r.classList.add("is-active"),i.classList.add("is-active")},t.loginClose=function(e,t){var n=this,r=document.querySelector(".x-header-content--login"),i=document.querySelector(".x-modal__content--login");r.classList.remove("is-active"),n.removeAllClasses(".x-modal__content","is-active"),i.classList.add("is-active")},t.loginSend=function(t){t.validateLogin()&&(t.updateLocalData(!1,!1),e.Topic(n.topicNames.USER_LOGIN_SUBMIT).publishWith(t,[{message:"success"}]))},t.logout=function(){e.Topic(n.topicNames.USER_LOGOUT_SUBMIT).publishWith([{message:"success"}])}}}})