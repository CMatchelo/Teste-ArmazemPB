define(["jquery"],function(e){return function(e){"use strict";function r(e,t){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),e.indexOf(t.prefix)>-1&&(e=e.replace(t.prefix,"")),e.indexOf(t.suffix)>-1&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function i(e,t){return t.allowEmpty&&e===""?"":t.reverse?o(e,t):s(e,t)}function s(e,t){var n=e.indexOf("-")>-1&&t.allowNegative?"-":"",i=e.replace(/[^0-9]/g,""),s=i.slice(0,i.length-t.precision),o,a,f;return o=u(s,n,t),t.precision>0&&(a=i.slice(i.length-t.precision),f=(new Array(t.precision+1-a.length)).join(0),o+=t.decimal+f+a),r(o,t)}function o(e,t){var n=e.indexOf("-")>-1&&t.allowNegative?"-":"",i=e.replace(t.prefix,"").replace(t.suffix,""),s=i.split(t.decimal)[0],o,a="";s===""&&(s="0"),o=u(s,n,t);if(t.precision>0){var f=i.split(t.decimal);f.length>1&&(a=f[1]),o+=t.decimal+a;var l=Number.parseFloat(s+"."+a).toFixed(t.precision),c=l.toString().split(t.decimal)[1];o=o.split(t.decimal)[0]+"."+c}return r(o,t)}function u(e,t,n){return e=e.replace(/^0*/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands),e===""&&(e="0"),t+e}var t={prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1,bringCaretAtEndOnFocus:!0},n={destroy:function(){return e(this).unbind(".maskMoney"),this},applyMask:function(t){var n=e(this),r=n.data("settings");return i(t,r)},mask:function(t){return this.each(function(){var n=e(this);return typeof t=="number"&&n.val(t),n.trigger("mask")})},unmasked:function(){return this.map(function(){var t=e(this).val()||"0",n=t.indexOf("-")!==-1,r;return e(t.split(/\D/).reverse()).each(function(e,t){if(t)return r=t,!1}),t=t.replace(/\D/g,""),t=t.replace(new RegExp(r+"$"),"."+r),n&&(t="-"+t),parseFloat(t)})},unmaskedWithOptions:function(){return this.map(function(){var n=e(this).val()||"0",r=e(this).data("settings")||t,i=new RegExp(r.thousandsForUnmasked||r.thousands,"g");return n=n.replace(i,""),parseFloat(n)})},init:function(n){return n=e.extend(e.extend({},t),n),this.each(function(){function u(){var e=t.get(0),n=0,r=0,i,s,o,u,a;return typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"?(n=e.selectionStart,r=e.selectionEnd):(s=document.selection.createRange(),s&&s.parentElement()===e&&(u=e.value.length,i=e.value.replace(/\r\n/g,"\n"),o=e.createTextRange(),o.moveToBookmark(s.getBookmark()),a=e.createTextRange(),a.collapse(!1),o.compareEndPoints("StartToEnd",a)>-1?n=r=u:(n=-o.moveStart("character",-u),n+=i.slice(0,n).split("\n").length-1,o.compareEndPoints("EndToEnd",a)>-1?r=u:(r=-o.moveEnd("character",-u),r+=i.slice(0,r).split("\n").length-1)))),{start:n,end:r}}function a(){var e=!(t.val().length>=t.attr("maxlength")&&t.attr("maxlength")>=0),n=u(),r=n.start,i=n.end,s=n.start!==n.end&&t.val().substring(r,i).match(/\d/)?!0:!1,o=t.val().substring(0,1)==="0";return e||s||o}function f(e){if(!!s.formatOnBlur)return;t.each(function(t,n){if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,e);else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()}})}function l(e){var n=t.val().length,r;t.val(i(t.val(),s)),r=t.val().length,s.reverse||(e-=n-r),f(e)}function c(){var e=t.val();if(s.allowEmpty&&e==="")return;var n=e.indexOf(s.decimal);if(s.precision>0)if(n<0)e+=s.decimal+(new Array(s.precision+1)).join(0);else{var r=e.slice(0,n),o=e.slice(n+1);e=r+s.decimal+o+(new Array(s.precision+1-o.length)).join(0)}else n>0&&(e=e.slice(0,n));t.val(i(e,s))}function h(){var e=t.val();return s.allowNegative?e!==""&&e.charAt(0)==="-"?e.replace("-",""):"-"+e:e}function p(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function d(){}function v(e){e=e||window.event;var t=e.which||e.charCode||e.keyCode,n=s.decimal.charCodeAt(0);return t===undefined?!1:(t<48||t>57)&&(t!==n||!s.reverse)?w(t,e):a()?t===n&&m()?!1:s.formatOnBlur?!0:(p(e),b(e),!1):!1}function m(){return g()?!1:y()}function g(){var e=t.val().length,n=u();return n.start===0&&n.end===e}function y(){return t.val().indexOf(s.decimal)>-1}function b(e){e=e||window.event;var n=e.which||e.charCode||e.keyCode,r="",i,s,o,a;n>=48&&n<=57&&(r=String.fromCharCode(n)),i=u(),s=i.start,o=i.end,a=t.val(),t.val(a.substring(0,s)+r+a.substring(o,a.length)),l(s+1)}function w(n,r){return n===45?(t.val(h()),!1):n===43?(t.val(t.val().replace("-","")),!1):n===13||n===9?!0:!e.browser.mozilla||n!==37&&n!==39||r.charCode!==0?(p(r),!0):!0}function E(e){e=e||window.event;var n=e.which||e.charCode||e.keyCode,r,i,o,a,f;return n===undefined?!1:(r=u(),i=r.start,o=r.end,n===8||n===46||n===63272?(p(e),a=t.val(),i===o&&(n===8?s.suffix===""?i-=1:(f=a.split("").reverse().join("").search(/\d/),i=a.length-f-1,o=i+1):o+=1),t.val(a.substring(0,i)+a.substring(o,a.length)),l(i),!1):n===9?!0:!0)}function S(){o=t.val(),c();var e=t.get(0),n;s.selectAllOnFocus?e.select():e.createTextRange&&s.bringCaretAtEndOnFocus&&(n=e.createTextRange(),n.collapse(!1),n.select())}function x(){setTimeout(function(){c()},0)}function T(){var e=parseFloat("0")/Math.pow(10,s.precision);return e.toFixed(s.precision).replace(new RegExp("\\.","g"),s.decimal)}function N(e){!!s.formatOnBlur&&t.val()!==o&&b(e);if(t.val()===""&&s.allowEmpty)t.val("");else if(t.val()===""||t.val()===r(T(),s))s.allowZero?s.affixesStay?t.val(r(T(),s)):t.val(T()):t.val("");else if(!s.affixesStay){var n=t.val().replace(s.prefix,"").replace(s.suffix,"");t.val(n)}t.val()!==o&&t.change()}function C(){var e=t.get(0),n;if(!!s.selectAllOnFocus)return;e.setSelectionRange&&s.bringCaretAtEndOnFocus?(n=t.val().length,e.setSelectionRange(n,n)):t.val(t.val())}function k(){var e=t.get(0),n,r;e.setSelectionRange&&s.bringCaretAtEndOnFocus?(r=t.val().length,n=s.doubleClickSelection?0:r,e.setSelectionRange(n,r)):t.val(t.val())}var t=e(this),s,o;s=e.extend({},n),s=e.extend(s,t.data()),t.data("settings",s),d(),t.unbind(".maskMoney"),t.bind("keypress.maskMoney",v),t.bind("keydown.maskMoney",E),t.bind("blur.maskMoney",N),t.bind("focus.maskMoney",S),t.bind("click.maskMoney",C),t.bind("dblclick.maskMoney",k),t.bind("cut.maskMoney",x),t.bind("paste.maskMoney",x),t.bind("mask.maskMoney",c)})}};e.fn.maskMoney=function(t){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.maskMoney")}}})