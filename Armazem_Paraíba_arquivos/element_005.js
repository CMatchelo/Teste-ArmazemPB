define(["jquery","knockout","pubsub","navigation","ccConstants","storageApi","ccResourceLoader!global/murmurHash3","ccRestClient","ccResourceLoader!global/enextSearchTypeaheadViewModel","ccResourceLoader!global/CustomTranslations"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var f=f.pt_BR.search;return{elementName:"enext_amz_header_search",searchValue:t.observable(""),searchElement:t.observable(null),clientDocument:t.observable(""),registerErrorMessage:t.observable(""),inputSearchValue:t.observable(""),searchResults:t.observableArray([]),searchNoMatchesFound:t.observableArray(""),searchResultsVariants:t.observableArray([]),searchResultsNotFound:t.observable(!1),searchTerm:t.observable(""),searchAllTerms:t.observable(""),ct:f,onLoad:function(e){var t=this},beforeAppear:function(){},initTypeahead:function(e,t){i.ENDPOINT_ASSEMBLE="search";var n=a.getInstance(e,t.site().selectedPriceListGroup().currency,f)},handleSearch:function(t){e.Topic(n.topicNames.SEARCH_TYPEAHEAD_CANCEL).publish([{message:"success"}]);var s=this.searchTerm().trim();s.length&&(r.goTo("/searchresults?"+i.SEARCH_TERM_KEY+"="+encodeURIComponent(this.searchTerm().trim())+"&"+i.SEARCH_DYM_SPELL_CORRECTION_KEY+"="+encodeURIComponent(i.DYM_ENABLED)+"&"+i.SEARCH_NAV_ERECS_OFFSET+"=0&"+i.SEARCH_REC_PER_PAGE_KEY+"="+i.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+i.SEARCH_RANDOM_KEY+"="+Math.floor(Math.random()*1e3)+"&"+i.SEARCH_TYPE+"="+i.SEARCH_TYPE_SIMPLE+"&"+i.PARAMETERS_TYPE+"="+i.PARAMETERS_SEARCH_QUERY),this.searchTerm(""))},searchOpen:function(t,n){var r=this;r.removeAllClasses(".x-header-content","is-active");var i=n.currentTarget.nextElementSibling;i.classList.add("is-active"),setTimeout(function(){e(".x-header-input").focus()},100)},searchClose:function(e,t){var n=t.currentTarget.offsetParent.offsetParent;n.classList.remove("is-active")},searchGo:function(){var e=this,t=document.querySelector(".x-header-content--search"),n=t.querySelector(".x-header-input");e.searchValue(n.value),e.searchElement(n),t.classList.remove("is-active"),r.goTo("/searchresults?"+i.SEARCH_TERM_KEY+"="+encodeURIComponent(e.searchValue().trim())+"&"+i.SEARCH_REC_PER_PAGE_KEY+"="+i.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+i.SEARCH_TYPE+"="+i.SEARCH_TYPE_SIMPLE+"&"+i.PARAMETERS_TYPE+"="+i.PARAMETERS_SEARCH_QUERY)},onGetProductsSuccess:function(e){console.log("Sucesso");var t=e;console.log(t)},onGetProductsError:function(){console.log("Erro")},getProducts:function(e){var t="listProducts",n="displayName co tenis",r={storePriceListGroupId:"amz-BRL",q:n};u.request(t,r,this.onGetProductsSuccess.bind(this),this.onGetProductsError.bind(this))}}})